<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffre</title>
    <link rel="stylesheet" href="../styles/boule.css">
</head>
<body> 
    
    <div class="containerButton">
        <button class="buttonReturn">
            <a href="../cell.html">Retour</a>
        </button>
    </div>

    <div id="puzzle">
        <p>Entre le code pour d√©verrouiller l'√©nigme :</p>
        <input type="text" id="codeInput" placeholder="Code √† 4 chiffres">
        <button onclick="checkCode()">Valider</button>
        <div id="success"></div>
      
        <div id="dragonball-reveal" style="display: none; text-align: center; margin-top: 20px;">
          <p>Bravo ! Il y avait une Dragon Ball √† l'int√©rieur !</p>
          <img src="../img/dragonball.jpg" alt="Dragon Ball" width="120">
          <br><br>
          <button onclick="goNext()" class="next-btn">√âtape suivante</button>
        </div>
      </div>
      
      
    <script>

function checkAndStoreSpecialTime() {
    // V√©rifier si la cl√© existe d√©j√† dans le localStorage
    if (localStorage.getItem("specialKey")) {
        alert("La cl√© a d√©j√† √©t√© g√©n√©r√©e pr√©c√©demment. Elle ne sera pas r√©g√©n√©r√©e.");
        return; // Ne rien faire si la cl√© existe d√©j√†
    }


    if (selectedHour === 13 && selectedMinute === 15) {
        let randomString = generateRandomString(10);
        localStorage.setItem("specialKey", randomString);
        alert(`üéâ Cl√© sp√©ciale g√©n√©r√©e et stock√©e. Inspecte bien toute la page.`);
    }
}
        function checkCode() {
        const code = document.getElementById('codeInput').value;
        const success = document.getElementById('success');
        const reward = document.getElementById('dragonball-reveal');

        if (code === "4829") {
            success.textContent = "";
            reward.style.display = "block";
        } else {
            success.textContent = "‚ùå Nope. Mauvais code.";
            reward.style.display = "none";
        }
        }

        function goNext() {
                const storedKey = localStorage.getItem("specialKey");

        localStorage.removeItem("specialKey"); // Supprime la cl√© apr√®s utilisation
        dragon_ball.nombre += 1;
        localStorage.setItem("dragon_ball", JSON.stringify(dragon_ball));
        window.location.href = '../../../index.html';

        }



    </script>
     <script src="../../../js/dragon_ball.js"></script>
</body>
</html>